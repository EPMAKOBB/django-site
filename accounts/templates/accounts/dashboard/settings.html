{% extends 'accounts/dashboard/base.html' %}
{% load i18n %}

{% block dashboard_title %}{% trans "Настройки" %}{% endblock %}

{% block dashboard_content %}
<h1 class="mb-16">{% trans "Настройки" %}</h1>
{% if request.user.teacherprofile and request.user.studentprofile %}
<form method="post" class="card mb-16">
    {% csrf_token %}
    <h2 class="mb-8">{% trans "Режим кабинета" %}</h2>
    <div class="role-toggle mb-16">
        <input type="radio" id="role-student" name="role" value="student" {% if role == 'student' %}checked{% endif %}>
        <label for="role-student">{% trans "Ученик" %}</label>
        <input type="radio" id="role-teacher" name="role" value="teacher" {% if role == 'teacher' %}checked{% endif %}>
        <label for="role-teacher">{% trans "Учитель" %}</label>
    </div>
    <button type="submit" name="role_submit" class="btn">{% trans "Сменить режим" %}</button>
</form>
{% endif %}
<form method="post" class="card mb-16">
    {% csrf_token %}
    <h2 class="mb-8">{% trans "Личная информация" %}</h2>
    {{ u_form.non_field_errors }}
    {% for field in u_form %}
        <div class="mb-16">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}
                <div class="errorlist">{{ field.errors }}</div>
            {% endif %}
        </div>
    {% endfor %}
    <button type="submit" name="user_submit" class="btn">{% trans "Сохранить изменения" %}</button>
</form>
<form method="post" class="card">
    {% csrf_token %}
    <h2 class="mb-8">{% trans "Изменить пароль" %}</h2>
    {{ p_form.non_field_errors }}
    {% for field in p_form %}
        <div class="mb-16">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            {{ field }}
            {% if field.errors %}
                <div class="errorlist">{{ field.errors }}</div>
            {% endif %}
        </div>
    {% endfor %}
    <button type="submit" name="password_submit" class="btn">{% trans "Изменить пароль" %}</button>
</form>
<form method="post" action="{% url 'accounts:logout' %}">
    {% csrf_token %}
    <button type="submit" class="btn mt-16">{% trans "Выйти из аккаунта" %}</button>
</form>
{% endblock %}
